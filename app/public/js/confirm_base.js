window.QZFL=window.QZFL||{};QZFL.widget=QZFL.widget||{};QZFL.widget.Confirm=QZFL.widget.Confirm||{count:0,instances:{}};QZFL.widget.Confirm.sIconMap=['qz_dialog_layer_icon_s qz_dialog_layer_icon_s_notice','qz_dialog_layer_icon_s qz_dialog_layer_icon_s_done','qz_dialog_layer_icon_s qz_dialog_layer_icon_s_error'];QZFL.widget.Confirm.iconMap={'succ':'qz_dialog_layer_icon qz_dialog_layer_icon_done','warn':'qz_dialog_layer_icon qz_dialog_layer_icon_notice','help':'qz_dialog_layer_icon qz_dialog_layer_icon_question','error':'qz_dialog_layer_icon qz_dialog_layer_icon_error'};QZFL.widget.Confirm.prototype.show=function(opts){var _s=QZFL.widget.Confirm,_d=QZFL.dialog,opts=this.opts,buff=[],bl=[],d,ps;if(!_d||this._baseDialogId){return;}
opts.hasTitle=(typeof opts.hastitle=='boolean')?opts.hastitle:true;opts.showMask=(typeof opts.showMask=='boolean')?opts.showMask:true;opts.tips=(typeof opts.tips=='object'&&opts.tips.length)?opts.tips:[];opts.type=opts.type||_s.TYPE.OK_NO_CANCEL;buff.push('<div class="qz_dialog_layer_confirm_content" style="width:260px;">','<i class="',_s.iconMap[opts.icontype||'warn'],'"></i><h3>',opts.content,'</h3>','<div class="qz_dialog_layer_confirm_content_p">',opts.desc||'','</div>','<div class="qz_dialog_layer_confirm_content_p"><i class="',_s.sIconMap[opts.altType],'"><i></i></i>',opts.altContent||'','</div>','</div>');(opts.type&_s.TYPE.OK)&&bl.push({type:_d.BUTTON_TYPE.Confirm,text:opts.tips[0]||'是',tips:'点击这里确认'});(opts.type&_s.TYPE.NO)&&bl.push({type:_d.BUTTON_TYPE.Negative,text:opts.tips[1]||'否',tips:'点击这里否决'});(opts.type&_s.TYPE.CANCEL)&&bl.push({type:_d.BUTTON_TYPE.Cancel,text:opts.tips[2]||'取消',tips:'点击这里取消'});opts.buttonConfig=opts.buttonConfig||bl;ps={width:opts.width||(opts.hasTitle?300:352),height:opts.height||(opts.hasTitle?140:160),statusContent:opts.statusContent,noBorder:!opts.hasTitle,showMask:opts.showMask,buttonConfig:opts.buttonConfig};!opts.hasTitle&&(ps.onLoad=function(th){th&&th.dialogBody&&(th.dialogBody.style.backgroundColor='#FFFFFF',(QZFL.userAgent.ie&&(QZFL.userAgent.ie<7))?(th.dialogBody.style.borderWidth='2px',th.dialogBody.style.borderStyle='solid',th.dialogBody.style.borderColor=QZFL.dom.getStyle(QZFL.dom.getFirstChild(th.dialogBody),"borderColor")):(QZFL.dom.getFirstChild(th.dialogBody).style.borderWidth='2px'));});d=_d.create(opts.title,buff.join(''),ps);this._baseDialogId=d.id;setTimeout((function(cfm,dlg){return function(){dlg.onConfirm=cfm.onConfirm;dlg.onNegative=cfm.onNo;dlg.onCancel=cfm.onCancel;dlg.onUnload=function(){(typeof cfm.onUnload=="function")&&(cfm.onUnload());cfm._baseDialogId=void(0);cfm.hide();};};})(this,d),0);};QZFL.widget.Confirm.prototype.hide=function(){var dlg;this._baseDialogId&&(dlg=QZFL.dialog.instances[this._baseDialogId])&&dlg.unload();this._baseDialogId=this.maskId=void(0);delete QZFL.widget.Confirm.instances[this.id];--QZFL.widget.Confirm.count;};